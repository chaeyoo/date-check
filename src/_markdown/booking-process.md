# 건강검진 예약 프로세스 설계 문서  
_(Next 14 App Router + zustand 기반)_

## 1. 배경 & 요구사항

### 1.1. 서비스 컨텍스트

- **도메인**: 특정 기업(고객사)에 속한 구성원이 건강검진을 예약하는 B2B/B2C 혼합 서비스
- **사용자 유형**: 로그인된 임직원(피보험자)
- **예약 대상자**:
  - 본인 (회사 지원)
  - 회사로부터 지원받는 가족
  - 본인 부담으로 예약하는 가족

### 1.2. 핵심 예약 플로우

1. 로그인 후 첫 화면에서 **본인 + 가족 리스트** 노출
2. 각 대상자별 **“예약하기”** 버튼 클릭
3. **병원 검색 화면**
   - 과거 방문 병원만 보기
   - 원하는 날짜 여러 개 선택하여 필터링
   - 특정 장비/검사(예: MRI, CT 등)로 필터링
4. 병원 선택 후, **해당 병원의 예약 가능 날짜 + 선택검사 선택 화면**
   - 날짜와 선택검사를 자유롭게 오갈 수 있음
   - 선택검사 종류에 따라 호환 가능한 병원/장비만 노출
5. 날짜 + 선택검사 선택 완료 후, **예약 확인 화면**
6. 예약 확정 시, **예약 조회 페이지**로 이동 (별도 URL)

---

## 2. 전체 기술 설계 개요

### 2.1. 기술 스택

- **Framework**: Next.js 14 (App Router)
- **상태 관리**: zustand (예약 플로우용 도메인 상태)
- **라우팅 전략**: App Router 기반 파일 시스템 라우팅
- **컴포넌트 분리**: 서버 컴포넌트(페이지/데이터 페칭) + 클라이언트 컴포넌트(상태, 이벤트 처리)

### 2.2. 설계 방향

- **URL는 “큰 단위”로만 쪼개고**, 예약 도중의 단계는 내부 step 상태로 관리
- 예약 과정에서 필요한 여러 선택 값들은 **단일 도메인 store (BookingStore)** 에서 관리
- “한 번 들어가서 쭉 진행하고 끝나는 플로우” 특성상,  
  **브라우저 클라이언트 전역 임시 상태(draft)** 로 취급
- 개발 단계에서 상태 변화를 쉽게 확인하기 위해 **Dev Panel 컴포넌트** 제공

---

## 3. 라우팅 설계

### 3.1. URL 구조

```text
/app
  /booking
    page.tsx              // 대상자(본인 + 가족) 선택
  /booking/[memberId]
    page.tsx              // 병원 검색 → 날짜/검사 선택 → 예약 확인 (위자드)
  /reservations
    page.tsx              // 예약 조회 목록
